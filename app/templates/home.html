<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Crowdi</title>
<script src="https://cdn.jsdelivr.net/npm/htmx.org@1.9.2"></script>
    <link rel="stylesheet" href="/static/style.css?v=1">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css?v=1">
</head>

<body>
    <header class="site-header">
        <div class="site-title">Crowdi</div>
        <div class="login-inline">
            {% if not user_id %}
            <form action="/login" method="post">
                <input type="text" name="username" required placeholder="Your name">
                <button type="submit">Log in</button>
            </form>
            {% else %}
            <span class="login-status">ðŸ‘¤ User #{{ user_id }}</span>
            {% endif %}
        </div>
    </header>

    <div class="page-container">


        <div class="main-content">
            <h1>Ask a Question</h1>
            <form hx-post="/ask" method="post" hx-target="#questions" hx-swap="outerHTML">
                <input type="text" name="text" required placeholder="Your question">

                <select name="type" required id="questionType">
                    <option value="text">Open Text</option>
                    <option value="yesno">Yes/No</option>
                    <option value="multiple">Multiple Choice</option>
                </select>

                <div id="multipleChoiceOptions" class="hidden">
                    <input type="text" name="options" placeholder="Comma-separated options (e.g., Red,Blue,Green)">
                </div>

                <button type="submit">Ask</button>
            </form>

            {% include "questions.html" %}
        </div>

    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const select = document.getElementById("questionType");
            const options = document.getElementById("multipleChoiceOptions");

            select.addEventListener("change", function () {
                options.classList.toggle("hidden", this.value !== "multiple");
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const select = document.getElementById("questionType");
            const options = document.getElementById("multipleChoiceOptions");

            // Initial state check (on load)
            if (select.value === "multiple") {
                options.classList.remove("hidden");
            }

            // Listen for changes
            select.addEventListener("change", function () {
                if (this.value === "multiple") {
                    options.classList.remove("hidden");
                } else {
                    options.classList.add("hidden");
                }
            });
        });
    </script>
</body>

</html>