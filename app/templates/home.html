<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Crowdi</title>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css?v=1">
</head>

<body>
    <header class="site-header">
        <div class="site-title">Crowdi</div>
        <div class="login-inline">
            {% if not user_id %}
            <form action="/login" method="post">
                <input type="text" name="username" required placeholder="Your name">
                <button type="submit">Log in</button>
            </form>
            {% else %}
            <span class="login-status">ðŸ‘¤ User #{{ user_id }}</span>
            {% endif %}
        </div>
    </header>

    <div class="page-container">


        <div class="main-content">
            <h1>Ask a Question</h1>
            <form hx-post="/ask" hx-target="#questions" hx-swap="outerHTML">
                <input type="text" name="text" required placeholder="Your question">

                <select name="type" required id="questionType">
                    <option value="text">Open Text</option>
                    <option value="yesno">Yes/No</option>
                    <option value="multiple">Multiple Choice</option>
                </select>

                <div id="multipleChoiceOptions" class="hidden">
                    <input type="text" name="options" placeholder="Comma-separated options (e.g., Red,Blue,Green)">
                </div>

                <button type="submit">Ask</button>
            </form>

            {% include "questions.html" %}
        </div>

    </div>

    <script>
        document.getElementById("questionType").addEventListener("change", function () {
            const options = document.getElementById("multipleChoiceOptions");
            options.classList.toggle("hidden", this.value !== "multiple");
        });
    </script>
</body>

</html>